/*! Reef v7.6.6 | (c) 2021 Chris Ferdinandi | MIT License | http://github.com/cferdinandi/reef */
"use strict";let e=!1;function t(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function n(t){if(e)throw new Error(t)}function r(e,n){function a(t){for(let n in e)e.hasOwnProperty(n)&&(t[n]=r(e[n]))}let o=t(e);return"object"===o?function(){let e={};return a(e),e}():"array"===o?e.map((function(e){return r(e)})):"map"===o?function(){let t=new Map;for(let[n,a]of e)t.set(n,r(a));return t}():"set"===o?function(){let e=new Set;for(let t of set)e.add(r(t));return e}():"function"===o?function(){let t=e.bind(this);return a(t),t}():"string"!==o||n?e:e.replace(/[^\w-_. ]/gi,(function(e){return`&#${e.charCodeAt(0)};`})).replace(/javascript:/gi,"")}function a(e){e.debounce&&window.cancelAnimationFrame(e.debounce),e.debounce=window.requestAnimationFrame((function(){e.render()}))}function o(e){return{get:function(n,r){return["object","array"].indexOf(t(n[r]))>-1?new Proxy(n[r],o(e)):n[r]},set:function(t,n,r){return t[n]===r||(t[n]=r,a(e)),!0}}}let i=["checked","selected","value"],l=["checked","selected"],u=["input","option","textarea"],c=["reef-checked","reef-selected","reef-value"],d=["reef-default-checked","reef-default-selected","reef-default-value"];function f(e,t){t.forEach((function(t){if("class"===t.att)e.className=t.value;else if("style"===t.att)e.style.cssText=t.value;else{if(t.att in e)try{e[t.att]=t.value,e[t.att]||0===e[t.att]||(e[t.att]="value"!==t.att||t.value)}catch(e){}try{e.setAttribute(t.att,t.value)}catch(e){}}}))}function s(e,t){t.forEach((function(t){if("class"===t.att)e.className="";else if("style"===t.att)e.style.cssText="";else{if(t.att in e)try{e[t.att]=""}catch(e){}try{e.removeAttribute(t.att)}catch(e){}}}))}function h(e,t){return{att:e,value:t}}function m(e,t){return 1!==e.nodeType?[]:Array.from(e.attributes).map((function(n){if(!(t&&i.includes(n.name)&&u.includes(e.tagName.toLowerCase()))){if(!t&&l.includes(n.name))return h(n.name,e[n.name]);if(!d.includes(n.name)){if(t&&c.includes(n.name)){let e=n.name.replace("reef-","");return l.includes(e)?h(e,"false"===n.value?null:e):h(e,n.value)}return h(n.name,n.value)}}})).filter((function(e){return!!e}))}function p(e){return 3===e.nodeType?"text":8===e.nodeType?"comment":e.tagName.toLowerCase()}function v(e){return e.childNodes&&e.childNodes.length>0?null:e.textContent}function y(e,t,n){let r=Array.from(t.childNodes),a=Array.from(e.childNodes);!function(e,t){let n=e.length-t.length;if(!(n<1))for(;n>0;n--)e[e.length-n].parentNode.removeChild(e[e.length-n])}(r,a),a.forEach((function(e,a){if(!r[a])return function e(t){1===t.nodeType&&(Array.from(t.attributes).forEach((function(e){if(!c.includes(e.name)&&!d.includes(e.name))return;let n=e.name.replace("reef-default-","").replace("reef-",""),r=l.includes(n);s(t,[h(e.name,e.value)]),r&&"false"===e.value||f(t,[h(n,r?n:e.value)])})),t.childNodes&&Array.from(t.childNodes).forEach((function(t){e(t)})))}(e),void t.append(e.cloneNode(!0));if(p(e)!==p(r[a]))return void r[a].replaceWith(e.cloneNode(!0));if(function(e,t){let n=m(e,!0),r=m(t),a=r.filter((function(e){let t=n.find((function(t){return e.att===t.att}));return void 0===t&&!i.includes(e.att)||t&&l.includes(t.att)&&null===t.value}));f(t,n.filter((function(e){if(l.includes(e.att)&&null===e.value)return!1;let t=r.find((function(t){return e.att===t.att}));return void 0===t||t.value!==e.value}))),s(t,a)}(e,r[a]),n.filter((function(t){return 3!==e.nodeType&&e.matches(t)})).length>0)return;let o=v(e);if(o&&o!==v(r[a])&&(r[a].textContent=o),r[a].childNodes.length>0&&e.childNodes.length<1)r[a].innerHTML="";else{if(r[a].childNodes.length<1&&e.childNodes.length>0){let t=document.createDocumentFragment();return y(e,t,n),void r[a].appendChild(t)}e.childNodes.length>0&&y(e,r[a],n)}}))}function g(e,t){e&&e.forEach((function(e){if(e.attached.includes(t))return n(`"${t.elem}" has attached nodes that it is also attached to, creating an infinite loop.`);"render"in e&&e.render()}))}function w(e,i){if(!(e||i&&i.lagoon))return n("You did not provide an element to make into a component.");if(!i||!i.template&&!i.lagoon)return n("You did not provide a template for this component.");let l=this,u=function(e,t){return e.setters?e.store?null:e.data:e.data&&!e.store?new Proxy(e.data,o(t)):null}(i,l),{store:c,router:d,setters:f,getters:s}=i;if(l.debounce=null,Object.defineProperties(l,{elem:{value:e},template:{value:i.template},allowHTML:{value:i.allowHTML},lagoon:{value:i.lagoon},store:{value:c},attached:{value:[]},router:{value:d},data:{get:function(){return f?r(u,!0):u},set:function(e){return c||f||(u=new Proxy(e,o(l)),a(l)),!0}},do:{value:function(e){if(c||!f)return n("There are no setters for this component.");if(!f[e])return n("There is no setter with this name.");let t=Array.from(arguments);t[0]=u,f[e].apply(l,t),a(l)}},get:{value:function(e){return c||!s?n("There are no getters for this component."):s[e]?s[e](u):n("There is no getter with this name.")}}}),d&&"addComponent"in d&&d.addComponent(l),c&&"attach"in c&&c.attach(l),i.attachTo){("array"===t(i.attachTo)?i.attachTo:[i.attachTo]).forEach((function(e){"attach"in e&&e.attach(l)}))}}w.prototype.render=function(){if(this.lagoon)return void g(this.attached,this);if(!this.template)return n("No template was provided.");let e="string"===t(this.elem)?document.querySelector(this.elem):this.elem;if(!e)return n("The DOM element to render your template into was not found.");let a=r((this.store?this.store.data:this.data)||{},this.allowHTML),o="function"===t(this.template)?this.template(a,this.router?this.router.current:e,e):this.template;if(!["string","number"].includes(t(o)))return;let i=this.attached.map((function(e){return e.elem}));return y(function(e){let t=(new DOMParser).parseFromString(e,"text/html");return t.head&&t.head.childNodes&&t.head.childNodes.length>0&&Array.from(t.head.childNodes).reverse().forEach((function(e){t.body.insertBefore(e,t.body.firstChild)})),t.body||document.createElement("body")}(o),e,i),w.emit(e,"render",a),g(this.attached,this),e},w.prototype.attach=function(e){"array"===t(e)?this.attached.push.apply(this.attached,e):this.attached.push(e)},w.prototype.detach=function(e){let n="array"===t(e)?e:[e],r=this;n.forEach((function(e){let t=r.attached.indexOf(e);t<0||r.attached.splice(t,1)}))},w.Store=function(e){return e.lagoon=!0,new w(null,e)},w.emit=function(e,t,r){let a;if(!e||!t)return n("You did not provide an element or event name.");a=new CustomEvent(t,{bubbles:!0,detail:r}),e.dispatchEvent(a)},w.debug=function(t){e=!!t},w.clone=r,w.trueTypeOf=t,w.err=n,module.exports=w;
