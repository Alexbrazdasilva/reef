/*! reef v0.1.0 | (c) 2018 Chris Ferdinandi | MIT License | http://github.com/cferdinandi/reef */
!(function(t,e){"function"==typeof define&&define.amd?define([],(function(){return e(t)})):"object"==typeof exports?module.exports=e(t):t.Reef=e(t)})("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,(function(t){"use strict";var e,n=function(){if(!Array.from||!t.DOMParser)return!1;e=e||new DOMParser;try{e.parseFromString("x","text/html")}catch(t){return!1}return!0},r=function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()},o=function(t,e){if(!n())throw new Error("Reef.js is not supported by this browser.");if(!t)throw new Error("Reef.js: You did not provide an element to make into a component.");if(!e||!e.template)throw new Error("Reef.js: You did not provide a template for this component.");this.elem=t,this.data=e.data,this.template=e.template},i=function(t){return"data-"===t.slice(0,5)||"for"===t},a=function(t,e){e.forEach((function(e){"class"===e.att?t.className=e.value:i(e.att)?t.setAttribute(e.att,e.value):t[e.att]=e.value}))},f=function(t,e){e.forEach((function(e){"class"===e.att?t.className="":t.removeAttribute(e.att)}))},u=function(t){return Array.from(t).map((function(t){return{att:t.name,value:t.value}}))},c=function(t){var e="text"===t.type?document.createTextNode(t.content):document.createElement(t.type);return a(e,t.atts),t.children.length>0?t.children.forEach((function(t){e.appendChild(c(t))})):"text"!==t.type&&(e.textContent=t.content),e},d=function(t,e){var n=e.atts.filter((function(e){return void 0===t.atts.find((function(t){return e.att===t.att}))})),r=t.atts.filter((function(t){var n=e.atts.find((function(e){return t.att===e.att}));return void 0===n||n.value!==t.value}));a(e.node,r),f(e.node,n)},s=function(t,e,n){var r=e.length-t.length;if(r>0)for(;r>0;r--)e[e.length-r].node.remove();t.forEach((function(r,o){return e[o]?t[o].type!==e[o].type?void e[o].node.parentNode.replaceChild(c(t[o]),e[o].node):(d(t[o],e[o],e[o].node),t[o].content!==e[o].content&&(e[o].node.textContent=t[o].content),void(r.children.length>0&&s(r.children,e[o].children||[],e[o].node))):void n.appendChild(c(t[o]))}))},l=function(t){var e=[];return Array.from(t.childNodes).forEach((function(t){e.push({content:t.childNodes&&t.childNodes.length>0?null:t.textContent,atts:3===t.nodeType?[]:u(t.attributes),type:3===t.nodeType?"text":t.tagName.toLowerCase(),children:l(t),node:t})})),e},p=function(t){return e=e||new DOMParser,e.parseFromString(t,"text/html").body};return o.prototype.render=function(){if(!this.template)throw new Error("Reef.js: No template was provided.");var e="string"==typeof this.elem?document.querySelector(this.elem):this.elem;if(!e)throw new Error("Reef.js: The DOM element to render your template into was not found.");var n="function"==typeof this.template?this.template(this.data):this.template;if(-1!==["string","number"].indexOf(typeof n)){var r=l(p(n)),o=l(e);if(s(r,o,e),"function"==typeof t.CustomEvent){var i=new CustomEvent("render",{bubbles:!0});e.dispatchEvent(i)}return e}},Object.prototype.getData=function(){return JSON.parse(JSON.stringify(this.data))},Object.prototype.setData=function(t){if("object"!==r(t))throw new Error("ReefJS: The provided data is not an object.");for(var e in t)this.data[e]=t[e];this.render()},o}));